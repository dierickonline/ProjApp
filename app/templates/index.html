{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <!-- Kanban Board -->
    <div id="board" class="board">
        {% for lane in lanes %}
            {% include 'partials/lane.html' %}
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Initialize drag and drop after page loads
    document.addEventListener('DOMContentLoaded', function() {
        initializeDragAndDrop();
    });

    // Reinitialize after HTMX swaps
    document.body.addEventListener('htmx:afterSwap', function(event) {
        if (event.detail.target.id === 'board' || event.detail.target.classList.contains('lane-cards')) {
            initializeDragAndDrop();
        }
    });
</script>
{% endblock %}
